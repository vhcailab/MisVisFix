{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %}
{% load crispy_forms_tags %}

{% block title %}
    How It Works
{% endblock %}

{% block style %}

    #howItWorksTable p {
        color: #000 !important;
        text-align: justify !important;
    }

    .background-container {
        height: 100vh;
        background-image: url('{{ MEDIA_URL }}custom_bkg.jpg');
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
        overflow: auto;
        padding: 40px;
    }

    #howItWorksTable th {
        background-color: #f8f9fa !important;
        color: #000000 !important;
    }

    #howItWorksTable thead th {
        position: sticky;
        top: 0;
        z-index: 2;
    }

    .table-scroll-wrapper {
        max-height: 600px;
        overflow-y: auto;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 8px;
        padding: 15px;
    }

{% endblock %}

{% block content %}

<div class="background-container">
    <h2 class="text-center mb-5 fw-bold" style="color: white;">How It Works</h2>

    <div class="table-scroll-wrapper">
        <table id="howItWorksTable" class="table table-bordered border-secondary table-striped mb-0 text-center">
            <thead class="table-light">
                <tr>
                    <th style="width: 20%;">Step</th>
                    <th style="width: 40%;">Description</th>
                    <th style="width: 40%;">Image</th>
                </tr>
            </thead>
            <tbody>
                <!-- Step 1 -->
                <tr>
                    <td><h5 class="fw-semibold text-primary">Upload Chart to Start</h5></td>
                    <td>
                        <p class="mb-0">
                            Click the upload area to select your chart image. Our system will analyze the chart to determine whether it is misleading. If issues are found, it will identify key problems and generate an improved version using advanced AI models like GPT and Claude.
                        </p>
                    </td>
                    <td class="text-center">
                        <img src="{{ MEDIA_URL }}tutorial/upload.png" alt="Upload" class="img-fluid rounded" style="max-height: 200px;">
                    </td>
                </tr>
                <!-- Step 2 -->
                <tr>
                    <td><h5 class="fw-semibold text-primary">Chart Analysis</h5></td>
                    <td>
                        <p class="mb-0">
                            In this section, key issues identified in the chart are displayed side-by-side for both GPT and Claude models. The issues are categorized as Major, Minor, and Potential to help prioritize review. You can expand each issue to view detailed explanations and understand how they might affect the interpretation of the chart.
                        </p>
                    </td>
                    <td class="text-center">
                        <img src="{{ MEDIA_URL }}tutorial/chart-analysis.png" alt="Chart Analysis" class="img-fluid rounded" style="max-height: 200px;">
                    </td>
                </tr>

                 <tr>
                    <td><h5 class="fw-semibold text-primary">View Issue Location on Hover</h5></td>
                    <td>
                        <p class="mb-0">
                            If you want to find the location where an issue persists in the chart, hover over any key issue from the list on the left. The corresponding area will be highlighted on the original chart image, allowing you to visually locate the problem without cluttering the image with all labels at once.
                        </p>
                    </td>
                    <td class="text-center">
                        <img src="{{ MEDIA_URL }}tutorial/point-issues.png" alt="Chart Analysis" class="img-fluid rounded" style="max-height: 200px;">
                    </td>
                </tr>
                

                 <tr>
                    <td><h5 class="fw-semibold text-primary">Chat Modes and Their Purpose</h5></td>
                    <td>
                        <p class="mb-0">
                            You can use our chat window for various purposes depending on your selected mode:
                                <br><br>
                                <strong>1. Text</strong> - Chat freely about your uploaded image. You can ask questions, request insights, or discuss improvements.<br>
                                <strong>2. Original Image (Claude)</strong> - Interact with the originally uploaded image using Claude. Choose this to request modifications through Claude's model.<br>
                                <strong>3. Latest Image (Claude)</strong> - Modify the most recent image generated by Claude in your current session.<br>
                                <strong>4. Original Image (GPT)</strong> - Use GPT to enhance or modify the image you initially uploaded.<br>
                                <strong>5. Latest Image (GPT)</strong> - Chat about and modify the latest GPT-generated version of your image.<br>
                                <strong>6. Original Image (Both)</strong> - Use both Claude and GPT together to modify your originally uploaded image.                        
                            </p>
                    </td>
                    <td class="text-center">
                        <img src="{{ MEDIA_URL }}tutorial/chat-modes.png" alt="Chart Analysis" class="img-fluid rounded" style="max-height: 200px;">
                    </td>
                </tr>
                
                <tr>
                    <td><h5 class="fw-semibold text-primary">Learn from Chat Feedback</h5></td>
                    <td>
                        <p class="mb-0">
                            You can teach the system to learn from your chat interactions by using the blue check icons highlighted in red.  
                            <br><br>
                            • To save and learn from a <b>single message</b>, click the check icon next to that specific response.<br>
                            • To learn from the <b>entire conversation</b>, use the top-right check icon to apply learning across the whole session.
                            <br><br>
                            This helps the system improve future responses based on your corrections and feedback.                     
                        </p>
                    </td>
                    <td class="text-center">
                        <img src="{{ MEDIA_URL }}tutorial/learn.png" alt="Chart Analysis" class="img-fluid rounded" style="max-height: 200px;">
                    </td>
                </tr>

                <tr>
                    <td><h5 class="fw-semibold text-primary">Add New Issue to the Database</h5></td>
                    <td>
                        <p class="mb-0">
                            As we work with a predefined set of 74 key issues, our chat system intelligently detects and suggests new issues during your conversation.  
                            <br><br>
                            If a potential new issue is identified, it will be displayed with details and an option to add it to the database.  
                            <br><br>
                            To confirm and add this issue, simply click the green check icon marked in red. This helps the system grow smarter and ensures that your unique findings contribute to improving the overall analysis engine.                   
                        </p>
                    </td>
                    <td class="text-center">
                        <img src="{{ MEDIA_URL }}tutorial/add-new-issues.png" alt="Chart Analysis" class="img-fluid rounded" style="max-height: 200px;">
                    </td>
                </tr>

                <tr>
                    <td><h5 class="fw-semibold text-primary">Claude Image Gallery</h5></td>
                    <td>
                        <p class="mb-0">
                            This section displays all images generated by Claude during your chat session. As Claude can produce different variations based on your prompts, you can navigate through each version using the forward and backward arrow icons.  
                            <br><br>
                            If you'd like to view an image in full size, simply click the expand icon located in the top-right corner of the image area.                  
                        </p>
                    </td>
                    <td class="text-center">
                        <img src="{{ MEDIA_URL }}tutorial/claude.png" alt="Chart Analysis" class="img-fluid rounded" style="max-height: 200px;">
                    </td>
                </tr>

                <tr>
                    <td><h5 class="fw-semibold text-primary">GPT Image Gallery</h5></td>
                    <td>
                        <p class="mb-0">
                            This section contains all images generated by GPT in response to your chat prompts. You can explore multiple variations of the modified chart by navigating with the left and right arrow icons.  
                            <br><br>
                            To view an image in full size, click the expand icon located in the top-right corner of the viewer. This helps you closely examine the visual adjustments made by GPT.
                        </p>
                    </td>
                    <td class="text-center">
                        <img src="{{ MEDIA_URL }}tutorial/gpt.png" alt="Chart Analysis" class="img-fluid rounded" style="max-height: 200px;">
                    </td>
                </tr>
                <tr>
                    <td><h5 class="fw-semibold text-primary">Upload Dataset for Your Chart</h5></td>
                    <td>
                        <p class="mb-0">
                            If you have the dataset corresponding to your uploaded chart, you can upload it here in Excel format. Our system will use this data to regenerate the chart accurately.  
                            <br><br>
                            This ensures better alignment between the visual and its underlying data, allowing for more precise analysis and correction of any issues found.
                        </p>
                    </td>
                    <td class="text-center">
                        <img src="{{ MEDIA_URL }}tutorial/dataset.png" alt="Chart Analysis" class="img-fluid rounded" style="max-height: 200px;">
                    </td>
                </tr>
                <tr>
                    <td><h5 class="fw-semibold text-primary">Chart Gallery</h5></td>
                    <td>
                        <p class="mb-0">
                            The Chart Gallery displays all uploaded charts across the system, along with their corresponding modifications generated by Claude and GPT. Each row includes the original chart, Claude’s version, and GPT’s version side by side to help you compare how different models handle improvements.  
                            <br><br>
                            This shared view allows you to explore insights contributed by other users and learn from a wide variety of visualizations. Click the <strong>View</strong> button to dive deeper into each chart and see its detailed analysis.
                        </p>
                    </td>
                    <td class="text-center">
                        <img src="{{ MEDIA_URL }}tutorial/gallery.png" alt="Chart Analysis" class="img-fluid rounded" style="max-height: 200px;">
                    </td>
                </tr>
                <!-- Add more steps as needed -->
            </tbody>
        </table>
    </div>
</div>




{% endblock content %}
